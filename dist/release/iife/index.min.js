/**  
 * 个人工具库 (TS版) bestime.iife.min.js
 * @QQ 1174295440
 * @author Bestime
 * @see https://github.com/bestime/tool
 * @update 2022-11-22 12:30:36
 */
var bestime=function(e){"use strict";function c(e){return null===e||e===undefined}function o(e){return c(e)?"":String(e)}var n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],u="Array",a="Object",f="String",$="Number",l=undefined,j="0",O="false",D="true",d=window,L=Object.prototype.toString,W=encodeURIComponent,i=decodeURIComponent;function s(e){return L.call(e).slice(8,-1)}function h(e){return s(e)===u}function g(e){return s(e)===a}function t(e,n){var t;try{t=JSON.parse(e)}catch(r){t=n}return t}function p(e){return e=g(e)||g(e=t(e))?e:{}}function v(e){return"function"==typeof e}function P(e){var t=[];function i(e,n){null!=e&&""!==e&&(n=null==(n=v(n)?n():n)?"":n,t[t.length]=W(e)+"="+W(n))}return function o(e,n){var t,r;if(e)switch(s(n)){case u:for(t=0;t<n.length;t++)o(e+"["+("object"==typeof n[t]&&n[t]?t:"")+"]",n[t]);break;case a:for(r in n)o(e+"["+r+"]",n[r]);break;default:i(e,n)}else switch(s(n)){case f:case a:for(r in n)o(r,n[r]);break;case u:for(t=0;t<n.length;t++)i(n[t].name,n[t].value)}}("",e),t.join("&")}var m="[\\s\\uFEFF\\xA0]+";function b(e,n){var t=s(e),r=(t===$&&(e=String(e),t=f),"");if(t!==f)return"";switch(n){case 1:r="^"+m;break;case-1:r=m+"$";break;case"*":r=m;break;default:r="^"+m+"|"+m+"$"}return e.replace(new RegExp(r,"g"),"")}function y(e){return s(e)===f}function J(e){var n,t=!0;for(n in e)n!==undefined&&(t=!1);return t}function K(e,n,t,r){y(e)?n&&""==b(e,"*")||r(e):null!=e&&(t&&g(e)&&J(e),r(e))}function w(e){return e=h(e)||h(e=t(e))?e:[]}function B(e,n,t){var r;t=null==t?60:t,e()?n():(clearTimeout(r),setTimeout(function(){B(e,n,t)},t))}B["async"]=function(n,t){return new Promise(function(e){B(n,e,t)})};var r={};function S(e){switch(s(e)){case u:for(var n=[],t=0;t<e.length;t++)n.push(S(e[t]));break;case a:for(var r in n={},e)n[r]=S(e[r]);break;case"Function":function i(){e.apply(this,arguments)}for(var o in e.prototype)i.prototype[o]=e.prototype[o];n=i;break;default:n=e}return n}var G={id:"id",children:"children"};function V(e,n,t){n=r=y(r=n)?r:JSON.stringify(r);var r=t&&0<t,i=new Date,t=(r&&i.setTime(i.getTime()+t),e+"="+encodeURI(n)+";path=/;");r&&(t+="expires="+i.toUTCString()),document.cookie=t}function k(e){return null==e?undefined:O!==e&&(D===e||t(e,e))}function F(e){return(e=Number(e))===Math.abs(Infinity)||isNaN(e)?0:e}var z=[l,l];function Q(e){if(e==l)return z;var r,i=e;return e.replace(/^\[(.*?)\](.*)?/,function(e,n,t){return i=n,r=t,""}),[i,r]}function Y(e){return""===e||/^\d+$/.test(e)}function q(e,n){return c(e)?n:e}function X(e,n){var t=document.createElement("a");t.style.display="none",t.download=n,t.setAttribute("href",e),t.setAttribute("download",n),document.body.appendChild(t),t.click(),t.remove(),undefined}var Z=d.URL;function ee(e,n){var t="";if((e=o(e)).length*n<1<<28)for(;1==(1&n)&&(t+=e),0!=(n>>>=1);)e+=e;return t}function ne(e,n,t,r){return(e=o(e)).length>(n>>=0)?e:(n-=e.length,t.length<n&&(t+=ee(t,n/t.length)),-1===r?t.slice(0,n)+e:e+t.slice(0,n))}function te(e,n,t){return ne(e,n,t,-1)}function _(e,n,t){return ne(e,n,t,1)}function E(e,n){return""!==e?e.split(n):[]}function N(e,n,t){var e=E(e=b(F(e)),"."),r=e[1]||"";return r.length<n&&(r=_(r,n,j),t&&(r=r.replace(/0+$/,""))),n<1||!r?e[0]:e[0]+"."+r.substring(0,n)}function re(e,t,r){var i,o;return r=c(r)?"children":r,function u(e){if(e)for(var n=0;n<e.length;n++){if(o=t(e[n])){i=e[n];break}if(u(e[n][r]),o)break}}(e),i}function x(e,n,t){var r=e[n];return e[n]===undefined||null===e[n]?"":te(t,2,"0")+r}var C=8388608,ie=1024*C;function I(e,n,t){t=!1===t?0:1;return e=Math.random()*(n-e+t)+e,t?Math.floor(e):e}function T(){return n[I(0,n.length-1)][0]}function oe(){}var R={},ue=0,ce=document.getElementsByTagName("head")[0];function A(e,t,r,i){for(var o=[],u=0,n=0;n<r.length;n++)!function(n){ae(e,t,r[n],function(e){o[n]=e,++u===r.length&&i.apply(l,o)})}(n)}function ae(e,n,t,r){var i=R&&R[t];if(!i)throw'alias "'+t+'" is not configured';var o,u,c,a,f,l=/^js/.test(t);function s(){i&&(i._complete=!0,v(r)&&(l?r(i.moduleName?d[i.moduleName]:undefined):r()))}i._count&&0<i._count?B(function(){return i._complete},s):!i._depenIsLoad&&i.dependencies&&0<i.dependencies.length?(i._depenIsLoad=!0,A(e,n+1,i.dependencies,function(){ae(e,n,t,s)})):!i._withIsLoad&&i["with"]&&0<i["with"].length?(i._withIsLoad=!0,A(e,n,i["with"].concat(t),s)):(i._count=i._count?i._count+1:1,i._deeps=e+"."+n,o=i._deeps,u=ce,c=i.url,a=s,"script"===(l?"script":"link")?(f=document.createElement("script")).src=c:((f=document.createElement("link")).href=c,f.setAttribute("rel","stylesheet")),f.setAttribute("level-id",o),f.setAttribute("author","bestime"),f.onload=f.onerror=a,u.appendChild(f))}function M(e,n){("object"==typeof e?A:ae)(++ue,1,e,n=n||oe)}M.config=function(e){if(!J(R))throw"config is already configured";R=e},M.getConfig=function(){return R},M["async"]=function(n){return new Promise(function(e){M(n,function(){h(n)?e(arguments):e(arguments[0])})})};var H={};return e._Array=w,e._Boolean=function(e){return!0===e||"true"===e||"1"===e||1===e},e._KvPair=p,e._Number=F,e._String=o,e.changeIndex=function(e,n,t){return e<0?n:((n=(n+t)%(e+=1))<0&&(n+=e),-0===n?0:n)},e.clean=function U(e,n,t){if(t=!1!==t,g(e)){var r,i,o={};for(i in e)K(h(r=e[i])||g(r)?U(r,n):r,n,t,function(e){o[i]=e})}else if(h(e)){o=[];for(var u=0,c=e.length;u<c;u++)K(U(e[u],n),n,t,function(e){o.push(e)})}else o=e;return o},e.cloneEasy=S,e.dataCacheUtil=function(e){r[e]=r[e]||{count:0,complete:!1,data:null};var n=r[e];return n.count++,{isExist:function(){return 1<n.count},set:function(e){n.complete=!0,n.data=JSON.stringify(e)},get:function(e){B(function(){return n.complete},function(){e(t(n.data))},100)},logs:r}},e.deepFindItem=re,e.deepFindTreePath=function(e,n,t){t=Object.assign(G,t);for(var r=[],i=S(e),o=new Set,u=t["children"];i.length;){var c=i[0];if(o.has(c))r.pop(),i.shift();else if(o.add(c),c[u]&&i.unshift.apply(i,c[u]),r.push(c),n(c))return r}return null},e.defaultValue=q,e.defineEventBus=function(i){if(H[i])throw'"'+i+'" Has already been registered!';return H[i]=H[i]||[],{on:function(e){H[i].push(e)},emit:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];for(var r=0;r<H[i].length;r++)H[i][r].apply(l,n)},off:function(e){if(!e)throw"the hander of off is required!";for(var n=0;n<H[i].length;n++)H[i][n]===e&&H[i].splice(n--,1)},dispose:function(){for(var e=0;e<H[i].length;e++)H[i].splice(e--,1);delete H[i]}}},e.downloadFileByArrayBuffer=function(e,n){X(e=Z.createObjectURL(new Blob([e])),n),Z.revokeObjectURL(e),undefined},e.downloadFileByUrl=X,e.fileSize=function(e,n){var t=e;switch(n=n||"Bytes"){case"MB":t=e*C;break;case"KB":t=8192*e;break;case"Bytes":t=8*e}var n=t/8796093022208,r=t/ie,i=t/C,o=t/8192,u=(console.log("_kb",o),t/8),n=N(n.toFixed(8),2),r=N(r.toFixed(8),2),i=N(i.toFixed(8),2),o=N(o.toFixed(8),2);return{Bit:t,Bytes:u=N(u.toFixed(8),2),KB:o,MB:i,GB:r,TB:n,format:.1<+n?n+" TB":.1<+r?r+" GB":.1<+i?i+" MB":o+" KB"}},e.flatTree=function(e,r){var i=[];return r=q(r,"children"),function o(e){if(h(e))for(var n,t=0;t<e.length;t++)n=e[t],i.push(n),o(n[r])}(e),i},e.floorFixed=N,e.forEachTree=function(e,t,r){r=r||"children",function i(e){for(var n=0;n<e.length;n++)t(e[n]),h(e[n][r])&&i(e[n][r])}(e)},e.getCookie=function(e,n){n=n||document.cookie;var r="";return n.replace(new RegExp("(^|;\\s)"+e+"=(.*?)($|(;\\s))"),function(e,n,t){r=k(i(t))}),r},e.getJsFileBaseUrl=function(e){e=e||0;for(var n="/[^/]*",t=document.scripts,r=0;r<e;r++)n+=n;return t[t.length-1].src.replace(new RegExp(n+"$"),"")},e.getRandom=I,e.getRelativePos=function(e){var n=e.getBoundingClientRect();return{x:n.left,y:n.top,height:e.offsetHeight,width:e.offsetWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight}},e.getStorage=function(e){return(e=localStorage.getItem(e))?k(e):""},e.getType=s,e.getWindowSize=function(){return{width:document.documentElement.clientWidth||document.body.clientWidth||window.innerWidth||0,height:document.documentElement.clientHeight||document.body.clientHeight||window.innerHeight||0}},e.isArray=h,e.isFunction=v,e.isKvPair=g,e.isNull=c,e.mapTree=function(e,r,i,o){o=o||"children";var n=[];return function u(e,n){for(var t=0;t<e.length;t++)n[t]=S(i(e[t])),n[t][r]=[],e[t][o]&&u(e[t][o],n[t][r])}(e,n),n},e.need=M,e.observeDomResize=function(e,n,t,r){r=r||500;var i=[0,0,!1],o=[0,0,!1],u=setInterval(function(){e.isConnected?(i[0]=e.offsetWidth,o[0]=e.offsetHeight,i[2]=i[0]!==i[1],o[2]=o[0]!==o[1],i[2]&&(i[1]=i[0],"width"===t&&n(e)),o[2]&&(o[1]=o[0],"height"===t&&n(e)),t||(i[2]||o[2])&&n(e)):c()},r);function c(){clearInterval(u)}return c},e.padEnd=_,e.padStart=te,e.param=P,e.parseQuery=function(e){var u,t,c={};return(e=e||d.location.href).replace(/([^=&?/#]*?)=([^=&?/#]*)/g,function(e,n,o){o=k(i(o)),t=i(n),u=!1,""!==t&&(t.replace(/(.*?)(\[.*)/,function(e,n,t){var r=Q(t);u=!0,Y(r[0])?c[n]=w(c[n]):c[n]=p(c[n]),function i(e,n,t){var n=Q(n),r=n[0];Y(r)?(r=F(r),n[1]==l?e.push(t):(/^\[[\D]+\]/.test(n[1])?e[r]=p(e[r]):e[r]=w(e[r]),i(e[r],n[1],t))):n[1]==l?e[r]=t:(/^\[[\D]+\]/.test(n[1])?e[r]=p(e[r]):e[r]=w(e[r]),i(e[r],n[1],t))}(c[n],t,o)}),u||(c[t]=o))}),c},e.prevent=function(e,n,t){e=e||d.event,t=!1!==t,(n=!1!==n)&&d.event?d.event.cancelBubble=!0:e.stopPropagation(),t&&d.event?d.event.returnValue=!1:e.preventDefault()},e.randomColor=function(){return"rgba("+I(0,255,!0)+","+I(0,255,!0)+","+I(0,255,!0)+",1)"},e.removeCookie=function(e){V(e,"",-1)},e.removeElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},e.removeStorage=function(e){localStorage.removeItem(e)},e.repeatString=ee,e.roundFixed=function(e,n,t){e=F(e);var r,i=Math.pow(10,n),e=o(Math.round(e*i)/i);return 0<n&&(r=(i=E(e,"."))[0],(i=i[1]||"").length<n&&(i=_(i,n,j),e=(i=t?i.replace(/0+$/,""):i)?r+"."+i:r)),e},e.serverConfig=function(e){var n,t,o={};for(t in e)n=e[t],o[t]={to:n,reg:new RegExp("^("+t+")(/|$)")};return function(e){var n,t=!1,r=e;for(n in o){var i=o[n];if(i.reg.test(e)){t=!0,"string"==typeof i.to&&(r=e.replace(i.reg,i.to+"$2"));break}}return t||(console.error('警告：请求地址 "'+e+'" 不在白名单中！'),console.table(o)),r}},e.setCookie=V,e.setStorage=function(e,n){localStorage.setItem(e,e=y(e=n)?e:JSON.stringify(e))},e.split=E,e.timeLine=function(e,n){n=n||["年","月","日 ","时","分","秒","毫秒"];for(var t,r=[],i=0;i<e.length;i++){var o,u=[x(n,0,(o=new Date(e[i])).getFullYear()),x(n,1,o.getMonth()+1),x(n,2,o.getDate()),x(n,3,o.getHours()),x(n,4,o.getMinutes()),x(n,5,o.getSeconds()),x(n,6,o.getMilliseconds())];r.push({value:e[i],timestamp:+o,split:[u,S(u)]})}for(r.sort(function(e,n){return e.millisecond-n.millisecond}),i=1;i<r.length;i++){s=l=f=a=c=void 0;for(var c=r[i-1],a=r[i],f=c.split[0],l=a.split[1],s=0;s<f.length&&f[s]===l[s];s++)l[s]=""}for(i=0;i<r.length;i++)(t=r[i]).split=t.split[1],t.label=b(t.split.join(""));return r},e.tree=function(e,n){for(var t,r,i=(n=p(n)).id||"id",o=n.pid||"pid",u=n.children||"children",c=0;c<e.length;c++)(r=e[c])[u]=w(r[u]),(t=re(e,function(e){return null!=e[i]&&e[i]!=r[i]&&e[i]===r[o]},u))&&(t[u]=w(t[u]),t[u].push(r),e.splice(c--,1));return e},e.trim=b,e.urlToGet=function(e,n){e=o(e).replace(/&*$/g,"").replace(/\?*$/,"");var t="";return(t=g(n)||h(n)?P(n):o(n).replace(/^&*/,""))&&(e+=(/\?/.test(e)?"&":"?")+t),e},e.uuid=function(e){e=F(e);for(var n="",t=0;t<13;t++)n+=I(1,9);return e=(new Date).getTime()*I(1,100),_(T()+Number(n).toString(32)+e.toString(32),20,T()+T()+T())},e.variableHasValue=B,e}({});
