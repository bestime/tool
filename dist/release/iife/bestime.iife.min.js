/**  
 * 个人工具库. bestime.iife.min.js
 * @QQ 1174295440
 * @author Bestime
 * @see https://github.com/bestime/tool
 * @update 2022-08-31 13:46:19
 */
var bestime=function(e){"use strict";function c(e){return null===e||e===undefined}function o(e){return c(e)?"":String(e)}var u=8192,a=1024*u,$=1024*a,i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],l="Array",f=undefined,s="0",r="false",j="true",p=window,J=Object.prototype.toString,d="Object",L=encodeURIComponent,D="function",g="String",H="Number",h=decodeURIComponent;function v(e){return J.call(e).slice(8,-1)}function m(e){return v(e)===l}function y(e){return v(e)===d}function b(e){try{e=JSON.parse(e)}catch(n){e=undefined}return e}function S(e){return e=y(e)||y(e=b(e))?e:{}}function w(e){return typeof e===D}function P(e){var t=[];function i(e,n){null!=e&&""!==e&&(n=null==(n=w(n)?n():n)?"":n,t[t.length]=L(e)+"="+L(n))}return function o(e,n){var t,r;if(e)switch(v(n)){case l:for(t=0;t<n.length;t++)o(e+"["+("object"==typeof n[t]&&n[t]?t:"")+"]",n[t]);break;case d:for(r in n)o(e+"["+r+"]",n[r]);break;default:i(e,n)}else switch(v(n)){case g:case d:for(r in n)o(r,n[r]);break;case l:for(t=0;t<n.length;t++)i(n[t].name,n[t].value)}}("",e),t.join("&")}function G(e,n){e=o(e).replace(/&*$/g,"").replace(/\?*$/,"");var t="";return(t=y(n)||m(n)?P(n):o(n).replace(/^&*/,""))&&(e+=(/\?/.test(e)?"&":"?")+t),e}function F(e,n){var t=v(e);if(t===H&&(e=String(e),t=g),t!==g)return"";switch(n){case 1:return e.replace(/^[\s\uFEFF\xA0]+/,"");case-1:return e.replace(/[\s\uFEFF\xA0]+$/,"");case 0:case"*":return e.replace(/[\s\uFEFF\xA0]+/g,"");default:return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function B(e){return v(e)===g}function K(e){var n,t=!0;for(n in e)n!==undefined&&(t=!1);return t}function V(e,n,t,r){B(e)?n&&""==F(e,"*")||r(e):null!=e&&(t&&y(e)&&K(e),r(e))}function N(e){return e=m(e)||m(e=b(e))?e:[]}function _(e,n,t){var r;t=null==t?60:t,e()?n():(clearTimeout(r),setTimeout(function(){_(e,n,t)},t))}var t={};var W={id:"id",children:"children"};function Q(e,n,t){n=r=B(r=n)?r:JSON.stringify(r);var r=new Date;r.setTime(r.getTime()+t),document.cookie=e+"="+encodeURI(n)+";path=/;expires="+r.toUTCString()}function k(e){var n=e;if(null==e)n=undefined;else if(r===e)n=!1;else if(j===e)n=!0;else if(B(e)&&/^\d+$/.test(e))n=String(e);else try{n=JSON.parse(e)}catch(t){}return n}function E(e){return(e=Number(e))===Math.abs(Infinity)||isNaN(e)?0:e}var Y=[f,f];function z(e){if(e==f)return Y;var r,i=e;return e.replace(/^\[(.*?)\](.*)?/,function(e,n,t){return i=n,r=t,""}),[i,r]}function X(e){return""===e||/^\d+$/.test(e)}function Z(e,n){return c(e)?n:e}function q(e,n){var t=document.createElement("a");t.style.display="none",t.download=n,t.setAttribute("href",e),document.body.appendChild(t),t.click(),t.remove(),undefined}function ee(e,n){var t="";if((e=o(e)).length*n<1<<28)for(;1==(1&n)&&(t+=e),0!=(n>>>=1);)e+=e;return t}function ne(e,n,t,r){return(e=o(e)).length>(n>>=0)?e:(n-=e.length,t.length<n&&(t+=ee(t,n/t.length)),-1===r?t.slice(0,n)+e:e+t.slice(0,n))}function te(e,n,t){return ne(e,n,t,-1)}function O(e,n,t){return ne(e,n,t,1)}function M(e,n){return""!==e?e.split(n):[]}function x(e,n,t){var e=M(e=F(E(e)),"."),r=e[1]||"";return r.length<n&&(r=O(r,n,s),t&&(r=r.replace(/0+$/,""))),n<1||!r?e[0]:e[0]+"."+r.substring(0,n)}function re(e,t,r){var i,o;return r=c(r)?"children":r,function u(e){if(e)for(var n=0;n<e.length;n++){if(o=t(e[n])){i=e[n];break}if(u(e[n][r]),o)break}}(e),i}function A(e,n,t){n=e[n];return""===n?"":te(t,2,"0")+n}function C(e,n,t){t=!1===t?0:1;return e=Math.random()*(n-e+t)+e,t?Math.floor(e):e}function ie(){}var I={},oe=0,ue=document.getElementsByTagName("head")[0];function R(e,t,r,i){for(var o=[],u=0,n=0;n<r.length;n++)!function(n){T(e,t,r[n],function(e){o[n]=e,++u===r.length&&i.apply(f,o)})}(n)}function T(e,n,t,r){var i=I.alias&&I.alias[t];if(!i)throw'alias "'+t+'" is not configured';var o,u,c,a,l,f,s=/^js/.test(t);function d(){i&&(i._complete=!0,w(r)&&(s?r(i.moduleName?p[i.moduleName]:undefined):r()))}i._count&&0<i._count?_(function(){return i._complete},d):!i._depenIsLoad&&i.dependencies&&0<i.dependencies.length?(i._depenIsLoad=!0,R(e,n+1,i.dependencies,function(){T(e,n,t,d)})):!i._syncsIsLoad&&i.syncs&&0<i.syncs.length?(i._syncsIsLoad=!0,R(e,n,i.syncs.concat(t),d)):(i._count=i._count?i._count+1:1,i._deeps=e+"."+n,o=s?"script":"link",a=G(I.baseUrl+i.url,{hash:I.hash}),u=i._deeps,c=ue,a=a,l=d,"script"===o?(f=document.createElement("script")).src=a:((f=document.createElement("link")).href=a,f.setAttribute("rel","stylesheet")),f.setAttribute("level-id",u),f.setAttribute("author","bestime"),f.onload=f.onerror=l,c.appendChild(f))}function n(e,n){("object"==typeof e?R:T)(++oe,1,e,n=n||ie)}return n.config=function(e){if(!K(I))throw"config is already configured";I=e},n.getConfig=function(){return I},e._Array=N,e._Boolean=function(e){return!0===e||"true"===e||"1"===e||1===e},e._Map=S,e._Number=E,e._String=o,e.changeIndex=function(e,n,t){return(n=(n+t)%(e+=1))<0&&(n+=e),-0===n?0:n},e.clean=function U(e,n,t){if(t=!1!==t,y(e)){var r,i,o={};for(i in e)V(m(r=e[i])||y(r)?U(r,n):r,n,t,function(e){o[i]=e})}else if(m(e)){o=[];for(var u=0,c=e.length;u<c;u++)V(U(e[u],n),n,t,function(e){o.push(e)})}else o=e;return o},e.dataCacheUtil=function(e){t[e]=t[e]||{count:0,complete:!1,data:null};var n=t[e];return n.count++,{isExist:function(){return 1<n.count},set:function(e){n.complete=!0,n.data=JSON.stringify(e)},get:function(e){_(function(){return n.complete},function(){e(JSON.parse(n.data))},100)},logs:t}},e.deepFindItem=re,e.deepFindTreePath=function(e,n,t){t=Object.assign(W,t);for(var r,i=[],o=(r=e,r=JSON.stringify(e),JSON.parse(r)),u=new Set,c=t["children"];o.length;){var a=o[0];if(u.has(a))i.pop(),o.shift();else if(u.add(a),a[c]&&o.unshift.apply(o,a[c]),i.push(a),n(a))return i}return null},e.defaultValue=Z,e.downloadFileByArrayBuffer=function(e,n){q(e=window.URL.createObjectURL(new Blob([e])),n),window.URL.revokeObjectURL(e)},e.downloadFileByUrl=q,e.fileSize=function(e,n){var t=e;switch(n){case"MB":t=e*a;break;case"KB":t=e*u;break;case"Bytes":t=8*e}var n=x(t/8796093022208,2),r=x(t/$,2),i=x(t/a,2),o=x(t/u,2);return{Bit:t,Bytes:x(t/8,2),KB:o,MB:i,GB:r,TB:n,format:1<=+n?n+" TB":1<=+r?r+" GB":1<=+i?i+" MB":o+" KB"}},e.flatTree=function(e,r){var i=[];return r=Z(r,"children"),function o(e){if(m(e))for(var n,t=0;t<e.length;t++)n=e[t],i.push(n),o(n[r])}(e),i},e.floorFixed=x,e.getCookie=function(e,n){n=n||document.cookie;var r="";return n.replace(new RegExp("(^|;\\s)"+e+"=(.*?)($|(;\\s))"),function(e,n,t){r=k(h(t))}),r},e.getJsFileBaseUrl=function(e){e=e||0;for(var n="/[^/]*",t=document.scripts,r=0;r<e;r++)n+=n;return t[t.length-1].src.replace(new RegExp(n+"$"),"")},e.getRandom=C,e.getRelativePos=function(e){var n=e.getBoundingClientRect();return{x:n.left,y:n.top,height:e.offsetHeight,width:e.offsetWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight}},e.getStorage=function(e){return(e=localStorage.getItem(e))?k(e):""},e.getType=v,e.isArray=m,e.isFunction=w,e.isMap=y,e.isNull=c,e.need=n,e.padEnd=O,e.padStart=te,e.param=P,e.parseQuery=function(e){var u,t,c={};return(e=e||p.location.href).replace(/([^=&?/#]*?)=([^=&?/#]*)/g,function(e,n,o){o=k(h(o)),t=h(n),u=!1,""!==t&&(t.replace(/(.*?)(\[.*)/,function(e,n,t){var r=z(t);u=!0,X(r[0])?c[n]=N(c[n]):c[n]=S(c[n]),function i(e,n,t){var n=z(n),r=n[0];X(r)?(r=E(r),n[1]==f?e.push(t):(/^\[[\D]+\]/.test(n[1])?e[r]=S(e[r]):e[r]=N(e[r]),i(e[r],n[1],t))):n[1]==f?e[r]=t:(/^\[[\D]+\]/.test(n[1])?e[r]=S(e[r]):e[r]=N(e[r]),i(e[r],n[1],t))}(c[n],t,o)}),u||(c[t]=o))}),c},e.prevent=function(e,n,t){e=e||p.event,t=!1!==t,(n=!1!==n)&&p.event?p.event.cancelBubble=!0:e.stopPropagation(),t&&p.event?p.event.returnValue=!1:e.preventDefault()},e.removeCookie=function(e){Q(e,"",-1)},e.removeElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},e.removeStorage=function(e){localStorage.removeItem(e)},e.repeatString=ee,e.roundFixed=function(e,n,t){e=E(e);var r,i=Math.pow(10,n),e=o(Math.round(e*i)/i);return 0<n&&(r=(i=M(e,"."))[0],(i=i[1]||"").length<n&&(i=O(i,n,s),e=(i=t?i.replace(/0+$/,""):i)?r+"."+i:r)),e},e.serverConfig=function(e){var n,t,o={};for(t in e)n=e[t],o[t]={to:n,reg:new RegExp("^("+t+")(/|$)")};return function(e){var n,t=!1,r=e;for(n in o){var i=o[n];if(i.reg.test(e)){t=!0,"string"==typeof i.to&&(r=e.replace(i.reg,i.to+"$2"));break}}return t||(console.error('警告：请求地址 "'+e+'" 不在白名单中！'),console.table(o)),r}},e.setCookie=Q,e.setStorage=function(e,n){localStorage.setItem(e,e=B(e=n)?e:JSON.stringify(e))},e.split=M,e.timeLine=function(e,n){n=n||["年","月","日 ","时","分","秒","毫秒"];for(var t,r=[],i=0;i<e.length;i++){var o,u=[A(n,0,(o=new Date(e[i])).getFullYear()),A(n,1,o.getMonth()+1),A(n,2,o.getDate()),A(n,3,o.getHours()),A(n,4,o.getMinutes()),A(n,5,o.getSeconds()),A(n,6,o.getMilliseconds())];r.push({value:e[i],timestamp:+o,split:[u,(o=u,o=b(o=JSON.stringify(o)))]})}for(r.sort(function(e,n){return e.millisecond-n.millisecond}),i=1;i<r.length;i++){s=f=l=a=c=void 0;for(var c=r[i-1],a=r[i],l=c.split[0],f=a.split[1],s=0;s<l.length&&l[s]===f[s];s++)f[s]=""}for(i=0;i<r.length;i++)(t=r[i]).split=t.split[1],t.label=F(t.split.join(""));return r},e.tree=function(e,n){for(var t,r,i=(n=S(n)).id||"id",o=n.pid||"pid",u=n.children||"children",c=0;c<e.length;c++)(r=e[c])[u]=N(r[u]),(t=re(e,function(e){return null!=e[i]&&e[i]!=r[i]&&e[i]===r[o]},u))&&(t[u]=N(t[u]),t[u].push(r),e.splice(c--,1));return e},e.trim=F,e.urlToGet=G,e.uuid=function(e){e=E(e);for(var n="",t=0;t<13;t++)n+=C(1,9);var n=E(n),r=(r=+new Date)*C(1,String(r).length)+n,r=i[C(0,i.length)]+n.toString(32)+r;return r=e?r.substring(0,e):r},e.variableHasValue=_,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
