/**  
 * 个人工具库. bestime.iife.min.js
 * @QQ 1174295440
 * @author Bestime
 * @see https://github.com/bestime/tool
 * @update 2022-08-30 18:19:06
 */
var bestime=function(e){"use strict";function c(e){return null===e||e===undefined}function o(e){return c(e)?"":String(e)}const u=8192,l=1024*u,a=1024*l,i=(a,["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),s="Array",f=null,$="0",r="false",j="true",d=window,L=Object.prototype.toString,g="Object",J=encodeURIComponent,D="function",p="String",H="Number",h=decodeURIComponent;function v(e){return L.call(e).slice(8,-1)}function m(e){return v(e)===s}function y(e){return v(e)===g}function b(e){try{e=JSON.parse(e)}catch(t){e=undefined}return e}function S(e){return e=y(e)||y(e=b(e))?e:{}}function w(e){return typeof e===D}function P(e){var n=[];function i(e,t){null!=e&&""!==e&&(t=null==(t=w(t)?t():t)?"":t,n[n.length]=J(e)+"="+J(t))}return function o(e,t){var n,r;if(e)switch(v(t)){case s:for(n=0;n<t.length;n++)o(e+"["+("object"==typeof t[n]&&t[n]?n:"")+"]",t[n]);break;case g:for(r in t)o(e+"["+r+"]",t[r]);break;default:i(e,t)}else switch(v(t)){case p:case g:for(r in t)o(r,t[r]);break;case s:for(n=0;n<t.length;n++)i(t[n].name,t[n].value)}}("",e),n.join("&")}function G(e,t){e=o(e).replace(/&*$/g,"").replace(/\?*$/,"");var n="";return(n=y(t)||m(t)?P(t):o(t).replace(/^&*/,""))&&(e+=(/\?/.test(e)?"&":"?")+n),e}function F(e,t){var n=v(e);if(n===H&&(e=String(e),n=p),n!==p)return"";switch(t){case 1:return e.replace(/^[\s\uFEFF\xA0]+/,"");case-1:return e.replace(/[\s\uFEFF\xA0]+$/,"");case 0:case"*":return e.replace(/[\s\uFEFF\xA0]+/g,"");default:return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function B(e){return v(e)===p}function K(e){var t,n=!0;for(t in e)t!==undefined&&(n=!1);return n}function V(e,t,n,r){B(e)?t&&""==F(e,"*")||r(e):null!=e&&(n&&y(e)&&K(e),r(e))}function _(e){return e=m(e)||m(e=b(e))?e:[]}function k(e,t,n){var r;n=null==n?60:n,e()?t():(clearTimeout(r),setTimeout(function(){k(e,t,n)},n))}const n={};const W={id:"id",children:"children"};function Q(e,t,n){t=r=B(r=t)?r:JSON.stringify(r);var r=new Date;r.setTime(r.getTime()+n),document.cookie=e+"="+encodeURI(t)+";path=/;expires="+r.toUTCString()}function N(e){let t=e;if(null==e)t=undefined;else if(r===e)t=!1;else if(j===e)t=!0;else if(B(e)&&/^\d+$/.test(e))t=String(e);else try{t=JSON.parse(e)}catch(n){}return t}function E(e){return(e=Number(e))===Math.abs(Infinity)||isNaN(e)?0:e}const Y=[f,f];function z(e){if(e==f)return Y;var r,i=e;return e.replace(/^\[(.*?)\](.*)?/,function(e,t,n){return i=t,r=n,""}),[i,r]}function X(e){return""===e||/^\d+$/.test(e)}function Z(e,t){return c(e)?t:e}function q(e,t){var n=document.createElement("a");n.style.display="none",n.download=t,n.setAttribute("href",e),document.body.appendChild(n),n.click(),n.remove(),undefined}function ee(e,t){var n="";if((e=o(e)).length*t<1<<28)for(;1==(1&t)&&(n+=e),0!=(t>>>=1);)e+=e;return n}function te(e,t,n,r){return(e=o(e)).length>(t>>=0)?e:(t-=e.length,n.length<t&&(n+=ee(n,t/n.length)),-1===r?n.slice(0,t)+e:e+n.slice(0,t))}function ne(e,t,n){return te(e,t,n,-1)}function M(e,t,n){return te(e,t,n,1)}function x(e,t){return""!==e?e.split(t):[]}function A(e,t,n){var e=x(e=F(E(e)),"."),r=e[1]||"";return r.length<t&&(r=M(r,t,$),n&&(r=r.replace(/0+$/,""))),t<1||!r?e[0]:e[0]+"."+r.substring(0,t)}function re(e,n,r){var i,o;return r=c(r)?"children":r,function u(e){if(e)for(var t=0;t<e.length;t++){if(o=n(e[t])){i=e[t];break}if(u(e[t][r]),o)break}}(e),i}function C(e,t,n){t=e[t];return""===t?"":ne(n,2,"0")+t}function I(e,t,n){n=!1===n?0:1;return e=Math.random()*(t-e+n)+e,n?Math.floor(e):e}let O={},ie=0,oe=document.getElementsByTagName("head")[0];function R(e,n,r,i){const o=[];let u=0;for(let t=0;t<r.length;t++)T(e,n,r[t],function(e){o[t]=e,++u===r.length&&i(...o)})}function T(e,t,n,r){const i=O.alias&&O.alias[n];let o="";if(o=i?o:`alias "${n}" is't configured`)throw o;const u=/^js/.test(n);function c(){i._complete=!0,w(r)&&(u?r(window[i.moduleName]):r())}if(0<i._count)k(function(){return i._complete},c);else if(!i._depenIsLoad&&i.dependencies&&0<i.dependencies.length)i._depenIsLoad=!0,R(e,t+1,i.dependencies,function(){T(e,t,n,c)});else if(!i._syncsIsLoad&&i.syncs&&0<i.syncs.length)i._syncsIsLoad=!0,R(e,t,i.syncs.concat(n),c);else{i._count=i._count?i._count+1:1,i._deeps=e+"."+t;var l=u?"script":"link",a=G(O.baseUrl+i.url,{hash:O.hash});{var s=i._deeps,f=oe,d=c;let e;"script"===l?(e=document.createElement("script")).src=a:((e=document.createElement("link")).href=a,e.setAttribute("rel","stylesheet")),e.setAttribute("level-id",s),e.setAttribute("author","bestime"),e.onload=e.onerror=d,f.appendChild(e)}}}function t(e,t){("object"==typeof e?R:T)(++ie,1,e,t)}return t.config=function(e){if(!K(O))throw"config is already configured";O=e},t.getConfig=function(){return O},e._Array=_,e._Boolean=function(e){return!0===e||"true"===e||"1"===e||1===e},e._Map=S,e._Number=E,e._String=o,e.changeIndex=function(e,t,n){return(t=(t+n)%(e+=1))<0&&(t+=e),-0===t?0:t},e.clean=function U(e,t,n){if(n=!1!==n,y(e)){var r,i,o={};for(i in e)V(m(r=e[i])||y(r)?U(r,t):r,t,n,function(e){o[i]=e})}else if(m(e)){o=[];for(var u=0,c=e.length;u<c;u++)V(U(e[u],t),t,n,function(e){o.push(e)})}else o=e;return o},e.dataCacheUtil=function(e){n[e]=n[e]||{count:0,complete:!1,data:null};const t=n[e];return t.count++,{isExist:function(){return 1<t.count},set:function(e){t.complete=!0,t.data=JSON.stringify(e)},get:function(e){k(function(){return t.complete},function(){e(JSON.parse(t.data))},100)},logs:n}},e.deepFindItem=re,e.deepFindTreePath=function(e,t,n){n=Object.assign(W,n);const r=[],i=[...e],o=new Set;for(var u=n["children"];i.length;){var c=i[0];if(o.has(c))r.pop(),i.shift();else if(o.add(c),c[u]&&i.unshift(...c[u]),r.push(c),t(c))return r}return null},e.defaultValue=Z,e.downloadFileByArrayBuffer=function(e,t){q(e=window.URL.createObjectURL(new Blob([e])),t),window.URL.revokeObjectURL(e)},e.downloadFileByUrl=q,e.fileSize=function(e,t){var n=e;switch(t){case"MB":n=e*l;break;case"KB":n=e*u;break;case"Bytes":n=8*e}var t=A(n/8796093022208,2),r=A(n/a,2),i=A(n/l,2),o=A(n/u,2);return{Bit:n,Bytes:A(n/8,2),KB:o,MB:i,GB:r,TB:t,format:1<=+t?t+" TB":1<=+r?r+" GB":1<=+i?i+" MB":o+" KB"}},e.flatTree=function(e,r){const i=[];return r=Z(r,"children"),function o(t){var n;if(m(t))for(let e=0;e<t.length;e++)n=t[e],i.push(n),o(n[r])}(e),i},e.floorFixed=A,e.getCookie=function(e,t){t=t||document.cookie;let r="";return t.replace(new RegExp("(^|;\\s)"+e+"=(.*?)($|(;\\s))"),function(e,t,n){r=N(h(n))}),r},e.getJsFileBaseUrl=function(e){e=e||0;for(var t="/[^/]*",n=document.scripts,r=0;r<e;r++)t+=t;return n[n.length-1].src.replace(new RegExp(t+"$"),"")},e.getRandom=I,e.getRelativePos=function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,height:e.offsetHeight,width:e.offsetWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight}},e.getStorage=function(e){return N(localStorage.getItem(e))},e.getType=v,e.isArray=m,e.isFunction=w,e.isMap=y,e.isNull=c,e.need=t,e.padEnd=M,e.padStart=ne,e.param=P,e.parseQuery=function(e){var t,u,n,c={};try{t=d.location.href}catch(r){t=""}return(e=B(e)?e:t).replace(/([^=&?/#]*?)=([^=&?/#]*)/g,function(e,t,o){o=N(h(o)),n=h(t),u=!1,""!==n&&(n.replace(/(.*?)(\[.*)/,function(e,t,n){var r=z(n);u=!0,X(r[0])?c[t]=_(c[t]):c[t]=S(c[t]),function i(e,t,n){var t=z(t),r=t[0];X(r)?(r=E(r),t[1]==f?e.push(n):(/^\[[\D]+\]/.test(t[1])?e[r]=S(e[r]):e[r]=_(e[r]),i(e[r],t[1],n))):t[1]==f?e[r]=n:(/^\[[\D]+\]/.test(t[1])?e[r]=S(e[r]):e[r]=_(e[r]),i(e[r],t[1],n))}(c[t],n,o)}),u||(c[n]=o))}),c},e.prevent=function(e,t,n){e=e||d.event,n=!1!==n,(t=!1!==t)&&d.event?d.event.cancelBubble=!0:e.stopPropagation(),n&&d.event?d.event.returnValue=!1:e.preventDefault()},e.removeCookie=function(e){Q(e,"",-1)},e.removeElement=function(e){try{e.parentNode.removeChild(e)}catch(t){}},e.removeStorage=function(e){localStorage.removeItem(e)},e.repeatString=ee,e.roundFixed=function(e,t,n){e=E(e);var r,i=Math.pow(10,t),e=o(Math.round(e*i)/i);return 0<t&&(r=(i=x(e,"."))[0],(i=i[1]||"").length<t&&(i=M(i,t,$),e=(i=n?i.replace(/0+$/,""):i)?r+"."+i:r)),e},e.serverConfig=function(e){let o={};var t,n;for(n in e)t=e[n],o[n]={to:t,reg:new RegExp("^("+n+")(/|$)")};return function(e){let t=!1;var n,r=e;for(n in o){const i=o[n];if(i.reg.test(e)){t=!0,"string"==typeof i.to&&(r=e.replace(i.reg,i.to+"$2"));break}}return t||(console.error('警告：请求地址 "'+e+'" 不在白名单中！'),console.table(o)),r}},e.setCookie=Q,e.setStorage=function(e,t){localStorage.setItem(e,e=B(e=t)?e:JSON.stringify(e))},e.split=x,e.timeLine=function(e,t){t=t||["年","月","日 ","时","分","秒","毫秒"];for(var n,r=[],i=0;i<e.length;i++){var o,u=[C(t,0,(o=new Date(e[i])).getFullYear()),C(t,1,o.getMonth()+1),C(t,2,o.getDate()),C(t,3,o.getHours()),C(t,4,o.getMinutes()),C(t,5,o.getSeconds()),C(t,6,o.getMilliseconds())];r.push({value:e[i],timestamp:+o,split:[u,(o=u,o=b(o=JSON.stringify(o)))]})}for(r.sort(function(e,t){return e.millisecond-t.millisecond}),i=1;i<r.length;i++){f=s=a=l=c=void 0;for(var c=r[i-1],l=r[i],a=c.split[0],s=l.split[1],f=0;f<a.length&&a[f]===s[f];f++)s[f]=""}for(i=0;i<r.length;i++)(n=r[i]).split=n.split[1],n.label=F(n.split.join(""));return r},e.tree=function(e,t){for(var n,r,i=(t=S(t)).id||"id",o=t.pid||"pid",u=t.children||"children",c=0;c<e.length;c++)(r=e[c])[u]=_(r[u]),(n=re(e,function(e){return null!=e[i]&&e[i]!=r[i]&&e[i]===r[o]},u))&&(n[u]=_(n[u]),n[u].push(r),e.splice(c--,1));return e},e.trim=F,e.urlToGet=G,e.uuid=function(e){e=E(e);let t="";for(let e=0;e<13;e++)t+=I(1,9);t=E(t);var n=(n=+new Date)*I(1,String(n).length)+t;let r=i[I(0,i.length)]+t.toString(32)+n;return r=e?r.substring(0,e):r},e.variableHasValue=k,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=bestime.iife.min.js.map
