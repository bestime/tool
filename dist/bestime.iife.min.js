/**  
 * 个人工具库. bestime.iife.min.js
 * @QQ 1174295440
 * @author Bestime
 * @see https://github.com/bestime/tool
 * @update 2022-08-11 09:29:02
 */
var bestime=function(e){"use strict";function c(e){return null===e||e===undefined}function o(e){return c(e)?"":String(e)}const u=8192,a=1024*u,l=1024*a,i=(l,["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),f="Array",s=null,d="0",D="false",j="true",g=window,t=Object.prototype.toString,p="Object",r=encodeURIComponent,h="String",J="Number",v=decodeURIComponent;function m(e){return t.call(e).slice(8,-1)}function b(e){return m(e)===f}function S(e){return m(e)===p}function y(e){try{e=JSON.parse(e)}catch(t){e=undefined}return e}function F(e){return e=S(e)||S(e=y(e))?e:{}}function w(e){return"function"==typeof e}function B(e){var n=[];function i(e,t){null!=e&&""!==e&&(t=null==(t=w(t)?t():t)?"":t,n[n.length]=r(e)+"="+r(t))}return function o(e,t){var n,r;if(e)switch(m(t)){case f:for(n=0;n<t.length;n++)o(e+"["+("object"==typeof t[n]&&t[n]?n:"")+"]",t[n]);break;case p:for(r in t)o(e+"["+r+"]",t[r]);break;default:i(e,t)}else switch(m(t)){case h:case p:for(r in t)o(r,t[r]);break;case f:for(n=0;n<t.length;n++)i(t[n].name,t[n].value)}}("",e),n.join("&")}function M(e,t){var n=m(e);if(n===J&&(e=String(e),n=h),n!==h)return"";switch(t){case 1:return e.replace(/^[\s\uFEFF\xA0]+/,"");case-1:return e.replace(/[\s\uFEFF\xA0]+$/,"");case 0:case"*":return e.replace(/[\s\uFEFF\xA0]+/g,"");default:return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function k(e){return m(e)===h}function x(e,t,n,r){if(k(e))(!t||""!=M(e,"*"))&&r(e);else if(null!=e){if(n&&S(e)){t=e;for(var i in t)i!==undefined&&0}r(e)}}function N(e){return e=b(e)||b(e=y(e))?e:[]}function T(e,t,n){var r;n=null==n?60:n,e()?t():(clearTimeout(r),setTimeout(function(){T(e,t,n)},n))}const n={};const _={id:"id",children:"children"};function C(e){let t=e;if(null==e)t=undefined;else if(D===e)t=!1;else if(j===e)t=!0;else if(k(e)&&/^\d+$/.test(e))t=String(e);else try{t=JSON.parse(e)}catch(n){}return t}function O(e){return(e=Number(e))===Math.abs(Infinity)||isNaN(e)?0:e}const H=[s,s];function P(e){if(e==s)return H;var r,i=e;return e.replace(/^\[(.*?)\](.*)?/,function(e,t,n){return i=t,r=n,""}),[i,r]}function G(e){return""===e||/^\d+$/.test(e)}function K(e,t){var n=document.createElement("a");n.style.display="none",n.download=t,n.setAttribute("href",e),document.body.appendChild(n),n.click(),n.remove()}function L(e,t){var n="";if((e=o(e)).length*t<1<<28)for(;1==(1&t)&&(n+=e),0!=(t>>>=1);)e+=e;return n}function V(e,t,n,r){return(e=o(e)).length>(t>>=0)?e:(t-=e.length,n.length<t&&(n+=L(n,t/n.length)),-1===r?n.slice(0,t)+e:e+n.slice(0,t))}function W(e,t,n){return V(e,t,n,-1)}function E(e,t,n){return V(e,t,n,1)}function R(e,t){return""!==e?e.split(t):[]}function A(e,t,n){var e=R(e=M(O(e)),"."),r=e[1]||"";return r.length<t&&(r=E(r,t,d),n&&(r=r.replace(/0+$/,""))),t<1||!r?e[0]:e[0]+"."+r.substring(0,t)}function Q(e,n,r){var i,o;return r=c(r)?"children":r,function u(e){if(e)for(var t=0;t<e.length;t++){if(o=n(e[t])){i=e[t];break}if(u(e[t][r]),o)break}}(e),i}function I(e,t,n){t=e[t];return""===t?"":W(n,2,"0")+t}function U(e,t,n){n=!1===n?0:1;return e=Math.random()*(t-e+n)+e,n?Math.floor(e):e}return e._Array=N,e._Boolean=function(e){return!0===e||"true"===e||"1"===e||1===e},e._Map=F,e._Number=O,e._String=o,e.clean=function $(e,t,n){if(n=!1!==n,S(e)){var r,i,o={};for(i in e)x(b(r=e[i])||S(r)?$(r,t):r,t,n,function(e){o[i]=e})}else if(b(e)){o=[];for(var u=0,c=e.length;u<c;u++)x($(e[u],t),t,n,function(e){o.push(e)})}else o=e;return o},e.dataCacheUtil=function(e){n[e]=n[e]||{count:0,complete:!1,data:null};const t=n[e];return t.count++,{isExist:function(){return 1<t.count},set:function(e){t.complete=!0,t.data=JSON.stringify(e)},get:function(e){T(function(){return t.complete},function(){e(JSON.parse(t.data))},100)},logs:n}},e.deepFindItem=Q,e.deepFindTreePath=function(e,t,n){n=Object.assign(_,n);const r=[],i=[...e],o=new Set;for(var u=n["children"];i.length;){var c=i[0];if(o.has(c))r.pop(),i.shift();else if(o.add(c),c[u]&&i.unshift(...c[u]),r.push(c),t(c))return r}return null},e.defaultValue=function(e,t){return c(e)?t:e},e.downloadFileByArrayBuffer=function(e,t){K(window.URL.createObjectURL(new Blob([e])),t)},e.downloadFileByUrl=K,e.fileSize=function(e,t){var n=e;switch(t){case"MB":n=e*a;break;case"KB":n=e*u;break;case"Bytes":n=8*e}var t=A(n/8796093022208,2),r=A(n/l,2),i=A(n/a,2),o=A(n/u,2);return{Bit:n,Bytes:A(n/8,2),KB:o,MB:i,GB:r,TB:t,format:1<=+t?t+" TB":1<=+r?r+" GB":1<=+i?i+" MB":o+" KB"}},e.floorFixed=A,e.getCookie=function(e,t){t=t||document.cookie;let r="";return t.replace(new RegExp("(^|;\\s)"+e+"=(.*?)($|(;\\s))"),function(e,t,n){r=C(v(n))}),r},e.getRandom=U,e.getRelativePos=function(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,height:e.offsetHeight,width:e.offsetWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight}},e.getStorage=function(e){return C(localStorage.getItem(e))},e.getType=m,e.isArray=b,e.isFunction=w,e.isMap=S,e.isNull=c,e.laterIdx=function(e,t,n){var r=e+1;return t=Math.max(t,0),t=Math.min(t,e),Math.abs(n)>r&&(n%=r),t+=n,n<0&&t<0?t=r+t:0<n&&e<t&&(t-=r),t},e.padEnd=E,e.padStart=W,e.param=B,e.parseQuery=function(e){var t,u,n,c={};try{t=g.location.href}catch(r){t=""}return(e=k(e)?e:t).replace(/([^=&?/#]*?)=([^=&?/#]*)/g,function(e,t,o){o=C(v(o)),n=v(t),u=!1,""!==n&&(n.replace(/(.*?)(\[.*)/,function(e,t,n){var r=P(n);u=!0,G(r[0])?c[t]=N(c[t]):c[t]=F(c[t]),function i(e,t,n){var t=P(t),r=t[0];G(r)?(r=O(r),t[1]==s?e.push(n):(/^\[[\D]+\]/.test(t[1])?e[r]=F(e[r]):e[r]=N(e[r]),i(e[r],t[1],n))):t[1]==s?e[r]=n:(/^\[[\D]+\]/.test(t[1])?e[r]=F(e[r]):e[r]=N(e[r]),i(e[r],t[1],n))}(c[t],n,o)}),u||(c[n]=o))}),c},e.prevent=function(e,t,n){e=e||g.event,n=!1!==n,(t=!1!==t)&&g.event?g.event.cancelBubble=!0:e.stopPropagation(),n&&g.event?g.event.returnValue=!1:e.preventDefault()},e.removeCookie=function(e){var t=new Date,e=(t.setTime(t.getTime()-1e7),e+"="+encodeURI("")+";expires="+t.toUTCString());document.cookie=e},e.removeElement=function(e){try{e.parentNode.removeChild(e)}catch(t){}},e.removeStorage=function(e){localStorage.removeItem(e)},e.repeatString=L,e.roundFixed=function(e,t,n){e=O(e);var r,i=Math.pow(10,t),e=o(Math.round(e*i)/i);return 0<t&&(r=(i=R(e,"."))[0],(i=i[1]||"").length<t&&(i=E(i,t,d),e=(i=n?i.replace(/0+$/,""):i)?r+"."+i:r)),e},e.serverConfig=function(e){let o={};var t,n;for(n in e)t=e[n],o[n]={to:t,reg:new RegExp("^("+n+")(/|$)")};return function(e){let t=!1;var n,r=e;for(n in o){const i=o[n];if(i.reg.test(e)){t=!0,"string"==typeof i.to&&(r=e.replace(i.reg,i.to+"$2"));break}}return t||(console.error('警告：请求地址 "'+e+'" 不在白名单中！'),console.table(o)),r}},e.setCookie=function(e,t,n){t=r=k(r=t)?r:JSON.stringify(r);var r=new Date;r.setTime(r.getTime()+n),document.cookie=e+"="+encodeURI(t)+";path=/;expires="+r.toUTCString()},e.setStorage=function(e,t){localStorage.setItem(e,e=k(e=t)?e:JSON.stringify(e))},e.split=R,e.timeLine=function(e,t){t=t||["年","月","日 ","时","分","秒","毫秒"];for(var n,r=[],i=0;i<e.length;i++){var o,u=[I(t,0,(o=new Date(e[i])).getFullYear()),I(t,1,o.getMonth()+1),I(t,2,o.getDate()),I(t,3,o.getHours()),I(t,4,o.getMinutes()),I(t,5,o.getSeconds()),I(t,6,o.getMilliseconds())];r.push({value:e[i],timestamp:+o,split:[u,(o=u,o=y(o=JSON.stringify(o)))]})}for(r.sort(function(e,t){return e.millisecond-t.millisecond}),i=1;i<r.length;i++){s=f=l=a=c=void 0;for(var c=r[i-1],a=r[i],l=c.split[0],f=a.split[1],s=0;s<l.length&&l[s]===f[s];s++)f[s]=""}for(i=0;i<r.length;i++)(n=r[i]).split=n.split[1],n.label=M(n.split.join(""));return r},e.tree=function(e,t){for(var n,r,i=(t=F(t)).id||"id",o=t.pid||"pid",u=t.children||"children",c=0;c<e.length;c++)(r=e[c])[u]=N(r[u]),(n=Q(e,function(e){return null!=e[i]&&e[i]!=r[i]&&e[i]===r[o]},u))&&(n[u]=N(n[u]),n[u].push(r),e.splice(c--,1));return e},e.trim=M,e.urlToGet=function(e,t){e=o(e).replace(/&*$/g,"").replace(/\?*$/,"");var n="";return(n=S(t)||b(t)?B(t):o(t).replace(/^&*/,""))&&(e+=(/\?/.test(e)?"&":"?")+n),e},e.uuid=function(e){e=O(e);let t="";for(let e=0;e<13;e++)t+=U(1,9);t=O(t);var n=(n=+new Date)*U(1,String(n).length)+t;let r=i[U(0,i.length)]+t.toString(32)+n;return r=e?r.substring(0,e):r},e.variableHasValue=T,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
