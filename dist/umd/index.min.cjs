/**
 * 纯JS工具库 => jUtilsBase
 * @update 2024-10-11 16:00:37
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).jUtilsBase={})}(this,function(n){"use strict";var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],a="Array",L="Class",N="Function",u="Object",c="String",$="Number",m=void 0,q="false",V="true",B=Object.prototype.toString,G=encodeURI,X=decodeURIComponent;function h(n){return null===n||n===m}function f(n){return h(n)?"":String(n)}var H=N.toLowerCase();function r(n){return typeof n===H}function l(n){return r(t=n)&&/^class\s/.test(Function.prototype.toString.call(t))?L:B.call(n).slice(8,-1);var t}function d(n){return l(n)===a}function s(n){return l(n)===u}function v(n){return l(n)===c}function i(n,t){var e;try{e=JSON.parse(n)}catch(r){e=t}return e}function g(n){return n=s(n)||s(n=i(n))?n:{}}function p(n){return h(n)||""===n}function K(n){var e=[];function i(n,t){null!=n&&""!==n&&(t=null==(t=r(t)?t():t)?"":t,e[e.length]=G(n)+"="+G(t))}return function o(n,t){var e,r;if(n)switch(l(t)){case a:for(e=0;e<t.length;e++)o(n+"["+("object"==typeof t[e]&&t[e]?e:"")+"]",t[e]);break;case u:for(r in t)o(n+"["+r+"]",t[r]);break;default:i(n,t)}else switch(l(t)){case c:case u:for(r in t)o(r,t[r]);break;case a:for(e=0;e<t.length;e++)i(t[e].name,t[e].value)}}("",n),e.join("&")}function _(n){return n=d(n)||d(n=i(n))?n:[]}function y(n){return l(n)===$}var o="[\\s\\uFEFF\\xA0]+";function b(n,t){var e=l(n),r=(e===$&&(n=String(n),e=c),"");if(e!==c)return"";switch(t){case 1:r="^"+o;break;case-1:r=o+"$";break;case"*":r=o;break;default:r="^"+o+"|"+o+"$"}return n.replace(new RegExp(r,"g"),"")}function x(n){var t=!1,e=0,e=y(n)?n:(v(n)&&(n=b(n,"*").replace(/,/g,"").replace(/%$/,function(n){return t=!0,""})),Number(n));return e=Math.abs(e)===Math.abs(Infinity)||isNaN(e)?0:e,t&&(e/=100),e}var U=[m,m];function W(n){if(n==m)return U;var r,i=n;return n.replace(/^\[(.*?)\](.*)?/,function(n,t,e){return i=t,r=e,""}),[i,r]}function Z(n){return""===n||/^\d+$/.test(n)}function z(n){var a={},u=!1,r="";return(n=h(n)?"":n).replace(/([^=&?/#]*?)=([^=&?/#]*)/g,function(n,t,o){var e;e=X(o),o=null==e?m:q!==e&&(V===e||i(e,e)),r=X(t),u=!1,""!==r&&(r.replace(/(.*?)(\[.*)/,function(n,t,e){var r=W(e);u=!0,Z(r[0])?a[t]=_(a[t]):a[t]=g(a[t]),function i(n,t,e){var t=W(t),r=t[0];Z(r)?(r=x(r),t[1]==m?n.push(e):(/^\[[\D]+\]/.test(t[1])?n[r]=g(n[r]):n[r]=_(n[r]),i(n[r],t[1],e))):t[1]==m?n[r]=e:(/^\[[\D]+\]/.test(t[1])?n[r]=g(n[r]):n[r]=_(n[r]),i(n[r],t[1],e))}(a[t],e,o)}),u||(a[r]=o))}),a}function k(n,t){for(var e=0;e<n.length;e++)t(n[e],e,n)}function w(t){switch(l(t)){case L:e=Object.assign(Object.create(Object.getPrototypeOf(t)),t);break;case a:for(var e=[],n=0;n<t.length;n++)e.push(w(t[n]));break;case u:e={},k(Object.keys(t),function(n){e[n]=w(t[n])});break;case N:function r(){t.apply(this,arguments)}for(var i in t.prototype)r.prototype[i]=t.prototype[i];e=r;break;default:e=t}return e}function J(n,t){var e=!1;return e=d(n)&&t.array&&0===n.length||s(n)&&t.kvPair&&function(n){var t,e=!0;for(t in n)if(t!==m){e=!1;break}return e}(n)||v(n)&&t.string&&""===n||h(n)?!0:e}function C(n,t,e){var r;e=null==e?60:e,n()?t():(clearTimeout(r),setTimeout(function(){C(n,t,e)},e))}C["async"]=function(t,e){return new Promise(function(n){C(t,n,e)})};var e={};var Q={id:"id",children:"children"};var Y=/(-|\+)?((\d+)|((\d,?)+\d+))(\.?\d+)?%?/.toString().replace(/(^\/)|(\/$)/g,"");function nn(n){n=b(n);return new RegExp("^"+Y+"$").test(n)}function tn(n,t){var e="";if((n=f(n)).length*t<1<<28)for(;1==(1&t)&&(e+=n),0!=(t>>>=1);)n+=n;return e}function en(n,t,e,r){return(n=f(n)).length>(t>>=0)?n:(t-=n.length,e.length<t&&(e+=tn(e,t/e.length)),-1===r?e.slice(0,t)+n:n+e.slice(0,t))}function rn(n,t,e){return en(n,t,e,-1)}function E(n,t,e){return en(n,t,e,1)}function T(n,t){return""!==n?n.split(t):[]}function S(n,e,t){var r,i,o=h(t)?"children":t;return function a(n){if(n)for(var t=0;t<n.length;t++){if(i=e(n[t])){r=n[t];break}if(a(n[t][o]),i)break}}(n),r}function A(n,t,e){e=!1===e?0:1;return n=Math.random()*(t-n+e)+n,e?Math.floor(n):n}function R(){return t[A(0,t.length-1)][0]}function on(n,i,o,a){a=a||"children";var t=[];return function u(n,t){for(var e=0;e<n.length;e++){var r=o(n[e]);h(r)||(t[e]=w(r),n[e][a]&&(t[e][i]=[],u(n[e][a],t[e][i])))}}(n,t),t}var M={};function an(n,t){}var un=function(){function n(n){this._timer=void 0,this._timer_info=void 0,this._stamp=0,this._passStamp=0,this._option=void 0,this._option=Object.assign({timeout:6e3,interval:1e3,handler:an},n),this._next=this._next.bind(this),this._doOnce=this._doOnce.bind(this),this.done=this.done.bind(this)}var t=n.prototype;return t._next=function(){return clearInterval(this._timer),this._passStamp=+new Date-this._stamp,this._timer=setTimeout(this._doOnce,this._option.interval),this},t._doOnce=function(){if(this._passStamp>=this._option.timeout)return this._option.onMessage&&this._option.onMessage(0),this.done(),this;this._option.handler(this._next,this.done)},t.start=function(){var n,t=this;this._stamp=+new Date,this.done(),this._doOnce();return this._option.onMessage&&(clearInterval(this._timer_info),this._timer_info=setInterval(function(){n=+new Date-t._stamp,0===(n=Math.max(t._option.timeout-n,0))&&t.done(),t._option.onMessage(n)},100)),this},t.done=function(){return clearTimeout(this._timer),clearTimeout(this._timer_info),this},t.dispose=function(){return this.done(),this},n}();function cn(n,t,e,r){if(n="【"+n+"】",e&&p(t))throw"字段"+n+"不能为空";if(l(t)!==r)switch(r){case"String":t=String(t);break;case"Number":if(!nn(t))throw"字段"+n+"必须为数字";t=Number(t)}return t}var fn={number:function(n,t){return cn(n,t,!(2<arguments.length&&arguments[2]!==undefined)||arguments[2],"Number")},string:function(n,t){return cn(n,t,2<arguments.length&&arguments[2]!==undefined&&arguments[2],"String")}};function O(n){return Array.from(new Set(n))}var ln=function(n,t){return Number(n)-Number(t)},sn=0,hn={};function dn(n,t){var e=[],r=[];return n.forEach(function(n){n=t[n],hn[n]||(hn[n]={id:++sn,label:n});n=hn[n];e.push(n.id),r.push(n.label)}),{id:e.join("_"),label:r.join("→")}}function mn(n,t){return n===m||t===m?m:(t-n)/Math.abs(n)}function F(n,t){var e,r={},i=-1;for(e in n)i++,r[e]=t(n[e],e,i);return r}function vn(n){return n.map(function(n,t){return{value:n,index:t}})}function P(n,t){return 0===n||h(n)?0:0===t||h(t)?1:n/t}function gn(n,e,r){var i=[];return n.forEach(function(t){e.some(function(n){return r(n,t)})||i.push(t)}),e.forEach(function(t){n.some(function(n){return r(n,t)})||i.some(function(n){return r(n,t)})||i.push(t)}),i}function I(n,t,e){return n===t||h(t)?n:(n=t,e?e(n):n)}var pn="sys-row-avg";function _n(n,t){var u={},e=t.colField;if(!h(e)&&n.length){var i=t.cellSummary;if(n.forEach(function(n){var t=n[e];u[t]=u[t]||{data:[],summary:0,_collect:[]},u[t].data.push(n),i&&(n=n[i.numerator[0]],u[t].summary+=n,u[t]._collect.push(n))}),!h(i)){var r,o,a;for(r in u)!function(n){var t=u[n],e=1,r=i.denominator;if(r)if(y(r))e=r;else switch(r[1]){case"length":e=t.data.map(function(n){return n[r[0]]}).length;break;case"uniqLength":e=O(t.data.map(function(n){return n[r[0]]})).length}switch(i.numerator[1]){case"sum":h(t.summary)||(t.summary=t.summary/e);break;case"length":t.summary=t._collect.length/e;break;case"uniqLength":t.summary=O(t._collect).length/e}}(r);a=o=0,F(u,function(n){o++;n=h(n.summary)?0:n.summary;a+=n}),u[pn]={data:[],summary:a/o,_collect:[]},t.colCustom&&F(t.colCustom,function(n,t){var e=c(n.numerator),n=n.denominator?c(n.denominator):1;u[t]={data:[],summary:P(e,n),_collect:[]}})}}return u;function c(o){var a=0,n=Object.keys(u).filter(function(n){var t=[pn].includes(n),n="*"===o[1]||o[1].includes(n);return!t&&n});return d(o[1])&&n.sort(function(n,t){return o[1].indexOf(n)-o[1].indexOf(t)}),n.forEach(function(n,t){var e,r,n=u[n],i=0;h(o[2])||"value"===o[2]?i=h(n.summary)?0:n.summary:"length"===o[2]?(e=o[3])&&(i=n.data.map(function(n){return n[e]}).length):"uniqLength"===o[2]&&(r=o[3])&&(i=O(n.data.map(function(n){return n[r]})).length),"sum"===o[0]?a+=i:"max"===o[0]?a=Math.max(a,i):"diff"===o[0]&&(0===t?a=i:a-=i)}),a}}function yn(n,u){var t={},c=0;!function l(n,t,e){for(var r=0;r<t.length;r++){var i=t[r],o=function(n,t){var e=[];return d(n)?n.forEach(function(n){e.push(t[n])}):e.push(t[n]),e.join("→")}(u.path[c].field,i);n[o]=n[o]||{uidPath:e.concat(o),uid:o,data:[],child:{}},n[o].data.push(i)}if(c<u.path.length-1)for(var a in c++,n)l(n[a].child,n[a].data,n[a].uidPath)}(t,n,[]);var n=function s(n,t,e,r){var i,o=[];for(i in n){var a=t===e,u=s(n[i].child,t,e+1,r);o.push({uidPath:n[i].uidPath,uid:n[i].uid,data:n[i].data,_columnRiseRatio:{},_columnTotal:{},_columnProportion:{},_columns:_n(n[i].data,r),isLeaf:a,children:u})}return o}(t,c,0,u),r=(!function i(n,t){var e;n.sort(null==(e=u.path[t])?void 0:e.sort),n.forEach(function(n){i(n.children,t+1)})}(n,0),!function o(n){n.forEach(function(n){var e={};F(n._columns,function(n,t){n=h(n.summary)?0:n.summary;e[t]=e[t]||0,e[t]+=n}),n._columnTotal=e,o(n.children)})}(n),{}),f=(n.forEach(function(e){F(e._columns,function(n,t){r[t]=r[t]||0,r[t]+=e._columnTotal[t]})}),[]);return u.colCustom&&F(u.colCustom,function(n,t){n.riseRatio||f.push(t)}),function e(n){var o={},a={};n.forEach(function(n,i){F(n._columns,function(n,t){var e,r;f.includes(t)||(0<i?h(e=n.summary)?a[t]=m:(r=null!=(r=o[t])?r:0,a[t]=P(e-r,r)):a[t]=void 0,o[t]=n.summary)}),n._columnRiseRatio=a,e(n.children)})}(n),function a(n,r){n.forEach(function(n,t){var e={};F(n._columns,function(n,t){e[t]=P(n.summary,r[t])}),n._columnProportion=e,a(n.children,n._columnTotal)})}(n,r),{data:n,total:r}}function j(n){return h(n)||0===n}var bn=[[1e4,"万"],[1e8,"亿"]];function D(n,t){return rn(n,t,"0")}function xn(n){return on(n,"children",function(n){return{field:n.field,title:n.title,count:function e(n){var t=0;return d(n.children)?n.children.forEach(function(n){t+=e(n)}):t=1,t}(n)}})}function kn(i){i.forEach(function(n,e){n.forEach(function(n,t){n&&(n.rowSpan=function(n,t){for(var e,r=0;n<i.length&&(null==i||null==(e=i[n])||!e[t]);n++)r++;return r}(e+1,t)+1)})})}var wn=new(function(){function n(){this._list={}}var t=n.prototype;return t._resetGroupClickXAxisCategory=function(i){i.forEach(function(t){clearTimeout(t.timer_01),t.instence.off("click",t.onAxxisSeriesClick),t.instence.off("click",t.onAxxisCategoryClick),t.onAxxisCategoryClick=function(n){var e=n.tickIndex,r=!1!==n.needEmit;clearTimeout(t.timer_01),t.timer_01=setTimeout(function(){i.forEach(function(n){var t=w(n.instence.getOption());t&&d(t.xAxis)&&t.xAxis.length&&r&&n.config&&n.config.onXAxisCtegoryClick&&(t=t.xAxis,n.config.onXAxisCtegoryClick(t.map(function(n){return n.data}),e,n.instence))})},30)},t.onAxxisSeriesClick=function(n){"markLine"!==n.componentType&&null!=t&&t.onAxxisCategoryClick&&t.onAxxisCategoryClick({tickIndex:n.dataIndex})},t.instence.on("click","series",t.onAxxisSeriesClick),t.instence.on("click","xAxis.category",t.onAxxisCategoryClick)})},t.clickXAsisCategory=function(n,t,e){var r,i=!0!==e;for(r in this._list)for(var o=0;o<this._list[r].length;o++){var a=this._list[r][o];a.instence===n&&a.onAxxisCategoryClick&&a.onAxxisCategoryClick({tickIndex:t,needEmit:i})}},t.add=function(n,t){var e=n.group;return e&&(this._list[e]=this._list[e]||[],this._list[e].push({config:t,instence:n,timer_01:-1}),this._resetGroupClickXAxisCategory(this._list[e])),this},t.remove=function(n){if(n)for(var t in this._list)for(var e=0;e<this._list[t].length;e++){var r=this._list[t][e];clearTimeout(r.timer_01),r.instence===n&&(r.instence.off("click",r.onAxxisCategoryClick),this._list[t].splice(e--,1))}},n}());function Cn(n,t){return Object.assign(n,t)}n.Animate=function(){function n(n){this._timer=void 0,this._passTime=0,this._options=void 0,this._middleData=void 0,this._options=n,this._middleData=w(n.to)}var t=n.prototype;return t.start=function(){var t=this,{from:e,to:r,easing:c,duration:f,onChange:i}=this._options,o=(new Date).getTime()-this._passTime;return clearInterval(this._timer),this._timer=setInterval(function(){var a=Math.min((new Date).getTime()-o,f),n=(!function u(r,i,o){function n(n){var t,e;y(i[n])||y(o[n])?(t=x(i[n]),e=x(o[n]),r[n]=c(a,t,e-t,f)):(d(i[n])||s(i[n]))&&u(r[n],i[n],o[n])}if(d(i))for(var t=0;t<i.length;t++)n(t);else if(s(i))for(var e in r)n(e)}(t._middleData,e,r),a/f);1==n&&(clearInterval(t._timer),a=0),t._passTime=a,i(t._middleData,n)},17),this},t.stop=function(){return clearInterval(this._timer),this},t.dispose=function(){this.stop()},n}(),n.Polling=un,n._Array=_,n._Boolean=function(n){return!0===n||"true"===n||"1"===n||1===n},n._KvPair=g,n._Number=x,n._String=f,n.arrayRowToColumn=function(n,i){var t,e=[],o=(n.forEach(function(n){n=String(n[i.colField]);e.includes(n)||e.push(n)}),e.sort(null!=(c=i.colSort)?c:ln),{}),s=(n.forEach(function(t){var n=dn(i.uniqueRowId,t),e={},r=(i.uniqueRowId.forEach(function(n){e[n]=t[n]}),o[n.id]=o[n.id]||{value:e,name:n.label,data:{}},i.colCreate(t[i.colField]).field);o[n.id].data[r]=o[n.id].data[r]||[],o[n.id].data[r].push(t)}),[]);for(t in o)s.push({name:o[t].name,value:o[t].value,data:o[t].data,summary:{}});var a,u,r,c=e.map(function(n){var t=i.colCreate(n);return{value:n,label:t.label,field:t.field}}),h={};return i.summaryConfig&&(i.summaryConfig.row&&(a=s,u=i.summaryConfig.row,r=i.summaryConfig.averageField,a.forEach(function(c){var f=u[c.name];if(f){var l,n,s=0,h=0;for(n in c.data)!function(n){h++;var t,e=[],r=0,i=[],o=[],a=(c.data[n].forEach(function(n){y(f.count)||e.push(n[f.count.field]);var t=x(n[f.value.field]);switch(f.value.mode){case"uniqLength":i.push(n[f.value.field]),i=O(i),r=i.length;break;case"sum":case"avg":r+=t}0!==t&&o.push(t)}),0);if(y(f.count))a=f.count;else switch(f.count.mode){case"length":a=e.length;break;case"uniqLength":a=O(e).length;break;case"notZeroValue":a=o.length}var u=r;"avg"===f.value.mode&&(u=r/a),s+=u,c.summary[n]={value:u,proportion:0,riseRatio:l?mn(null==(t=c.summary[l])?void 0:t.value,u):void 0},l=n}(n);c.summary[r]={value:s/h,riseRatio:m,proportion:0}}}),a.forEach(function(n){var t=u[n.name];if(t){var e=a.find(function(n){return n.name===t.proportionBaseField});if(t.proportionBaseField&&e)for(var r in n.summary)n.summary[r].proportion=n.summary[r].value/e.summary[r].value}}),s=a),i.summaryConfig.column&&(h=function(f,l,s){var n,h={},d={},t=function(i){d[i]={},h[i]={};var n,o=l[i],t=(f.forEach(function(r){for(var n in r.data)!function(n){h[i][n]=h[i][n]||{data:[],sum:0};var t=[],e=0;switch(r.data[n].forEach(function(n){switch(t.push(n[o.field]),o.mode){case"uniqLength":t=O(t);break;case"avg":case"sum":e+=n[o.field];break;case"notZeroLength":0!==x(n[o.field])&&e++}}),o.mode){case"uniqLength":t=O(t);break;case"avg":e/=r.data[n].length}h[i][n].data=h[i][n].data.concat(t),h[i][n].sum+=e}(n)}),void 0);for(n in h[i]){var e,r=0;switch(o.mode){case"avg":r=h[i][n].sum/f.length;break;case"uniqLength":r=O(h[i][n].data).length;break;case"notZeroLength":case"sum":r=h[i][n].sum}d[i][n]={value:r,proportion:0,riseRatio:t?mn(null==(e=d[i][t])?void 0:e.value,r):void 0},t=n}var a,u=0,c=0;for(a in d[i])u+=d[i][a].value,c++;d[i][s]={value:u/c,riseRatio:m,proportion:0}};for(n in l)t(n);return d}(s,i.summaryConfig.column,i.summaryConfig.averageField))),{columns:c,data:s,colSummary:h,getExtRow:function(t,n,e){var r,i=s.find(function(n){return n.name===t}),o={};if(!i){var a=n,u=e,c=h[t],f={};if(c)for(var l in c)f[l]=u(c[l][a]);return f}for(r in i.summary)o[r]=e(i.summary[r][n]);return o}}},n.changeIndex=function(n,t,e){return n<0?t:((t=(t+e)%(n+=1))<0&&(t+=n),-0===t?0:t)},n.cloneEasy=w,n.connectEcharts=wn,n.dataCache=function(n){e[n]=e[n]||{count:0,complete:!1,data:null};var t=e[n];return t.count++,{isExist:function(){return 1<t.count},set:function(n){t.complete=!0,t.data=JSON.stringify(n)},get:function(n){C(function(){return t.complete},function(){n(i(t.data))},100)},logs:e}},n.dataPage=function(n,t,e){if(e<1)throw"页码必须大于0";var r=(e-1)*t,i=r+t;return{current:e,total:n.length,size:t,pages:Math.ceil(n.length/t),data:w(n.slice(r,i))}},n.debounce=function(r,n,t){var e,i,o,a,u=I(500,n),{leading:c,trailing:f}=Cn({leading:!1,trailing:!0},t),l=!1,s=!1;function h(){clearTimeout(e),e=setTimeout(d,u)}function d(){l=!1}function m(){l=!0,h(),r.apply(self,a)}function v(){if(!s){o=this;for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];a=t,c&&(l||(l=!0,r.apply(o,a)),h()),f&&(clearTimeout(i),i=setTimeout(m,u))}}return v.cancel=function(){clearTimeout(e),clearTimeout(i)},v.dispose=function(){clearTimeout(e),clearTimeout(i),s=!0},v},n.deepFindItem=S,n.deepFindTreePath=function(n,t,e){e=Object.assign(Q,e);for(var r=[],i=w(n),o=new Set,a=e["children"];i.length;){var u=i[0];if(o.has(u))r.pop(),i.shift();else if(o.add(u),u[a]&&i.unshift.apply(i,u[a]),r.push(u),t(u))return r}return undefined},n.defineEventBus=function(i){if(M[i])throw'"'+i+'" Has already been registered!';return M[i]=M[i]||[],{on:function(n){M[i].push(n)},emit:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];for(var r=0;r<M[i].length;r++)M[i][r].apply(m,t)},off:function(n){if(!n)throw"the hander of off is required!";for(var t=0;t<M[i].length;t++)M[i][t]===n&&M[i].splice(t--,1)},dispose:function(){for(var n=0;n<M[i].length;n++)M[i].splice(n--,1);delete M[i]},eventList:function(){return M[i]}}},n.defualtFormatter=I,n.difference=gn,n.fieldCheck=fn,n.filterWithMove=function(n,t){for(var e=[],r=0;r<n.length;r++){var i=n[r];t(i,r,n)&&(e.push(i),n.splice(r--,1))}return e},n.floorFixed=function(n,t,e){var r=(n=T(n=b(x(n)),"."))[1]||"";return r.length<t&&(r=E(r,t,"0"),e&&(r=r.replace(/0+$/,""))),t<1||!r?n[0]:n[0]+"."+r.substring(0,t)},n.forEach=k,n.forEachKvPair=F,n.forEachTree=function(n,i,o){o=o||"children",function a(n,t){for(var e=0;e<n.length;e++){var r=w(t);i(n[e],r),d(n[e][o])&&(r.push(n[e]),a(n[e][o],r))}}(n,[])},n.formatTime=function(n){var t=(n=new Date(n)).getFullYear(),e=n.getMonth()+1,r=n.getDate(),i=n.getHours(),o=n.getMinutes(),a=n.getSeconds(),n=n.getMilliseconds();return D(t,4)+"/"+D(e,2)+"/"+D(r,2)+" "+D(i,2)+":"+D(o,2)+":"+D(a,2)+":"+D(n,3)},n.getLikeNumberRegExp=function(){return Y},n.getPiecesWithIndex=function(n,r){var i=[];return k(n,function(t,n){var e=r.find(function(n){return t>=n.min&&t<n.max});e&&i.push({gte:n,lt:n+1,color:e.color})}),i},n.getRandom=A,n.getRatio=P,n.getRiseRatio=function(n,t){return j(n)&&j(t)?0:j(n)?1:j(t)?-1:(t-n)/n},n.getSortIndex=function(n,e){var t=vn(n),r=vn(n);return r.sort(function(n,t){return e(n.value,t.value)}),t.map(function(t){return r.findIndex(function(n){return t.index===n.index})})},n.getType=l,n.isArray=d,n.isEmpty=p,n.isFunction=r,n.isFuzzyMatch=function(n,t,e){var r=!0;return(n=b(n,"*"))&&(n=T(n,"").join(".*"),r=new RegExp(n,f(e)).test(t)),r},n.isKvPair=s,n.isLikeNumber=nn,n.isNull=h,n.isString=v,n.listGroup=function(n,t){var l=yn(n,t);function o(n,t,e,r,i){var o=S(l.data,function(n){return 0===gn(n.uidPath,t,function(n,t){return n===t}).length}),a=I("",i);if(o)try{switch(n){case"_columnRiseRatio":case"_columnTotal":case"_columnProportion":var u=o[n][e];return h(u)?a:r(u);default:var c=o[n][e].summary;return h(c)?a:r(c,o[n][e].data)}}catch(f){return a}return a}function a(n,t,e,r){return o("_columns",n,t,e,r)}function u(n,t,e,r){return o("_columnProportion",n,t,e,r)}return{data:l.data,getCellValue:a,getCellVerticalRiseRatio:function(n,t,e,r){return o("_columnRiseRatio",n,t,e,r)},getCellVerticalTotal:function(n,t,e,r){var i;return"*"===n?h(i=l.total[t])?I("",r):e(i):o("_columnTotal",n,t,e,r)},getCellVerticalProportion:u,getRowCellValue:function(t,n,e,r){var i={};return n.forEach(function(n){i[n.id]=a(t,n.field,e,r)}),i},getRowVerticalProportion:function(t,n,e,r){var i={};return n.forEach(function(n){i[n.id]=u(t,n.field,e,r)}),i},getOriginGroupData:function(t,n){var e=S(l.data,function(n){return 0===gn(n.uidPath,t,function(n,t){return n===t}).length});return e&&null!=(e=null==(n=e._columns[n])?void 0:n.data)?e:[]},getOriginAllData:function(){return n}}},n.mapKvPair=function(n,t){var e,r={};for(e in n)r[e]=t(w(n[e]),e);return r},n.mapTree=on,n.mixInZeroWidthUnicode=function(n){return T(n,"").join("‎")},n.padEnd=E,n.padMinMax=function(n){for(var t,e,r,i=arguments.length,o=new Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return o.forEach(function(n){n.forEach(function(n){n=x(n);t=h(t)?n:Math.min(t,n),e=h(e)?n:Math.max(e,n)})}),h(t)||h(e)||(t-=(r=e-t)*n,e+=r*n),{min:t,max:e}},n.padStart=rn,n.param=K,n.parseQuery=z,n.parseTreeToTableHeader=function(n){return kn(n=function u(n,i,o,a){return i[o]||(i[o]=[]),--a,n.forEach(function(n){var t=a+1,e=(a=t+n.count-1)-t+1,e={colStart:t,colEnd:a,colSpan:e,count:n.count,field:n.field,title:n.title,rowSpan:1};i[o][t]=e;for(var r=1;r<n.count;r++)i[o][t+r]=void 0;d(n.children)&&0<n.children.length&&u(n.children,i,o+1,t)}),i.forEach(function(n){for(var t=0;t<i[0].length;t++)n[t]||(n[t]=void 0)}),i}(xn(n),[],0,0)),{columns:function(n){for(var e=[],t=n.length-1;0<=t;t--)n[t].forEach(function(n,t){n&&n.field&&h(e[t])&&(e[t]=n.field)});return e}(n),data:n}},n.randomColor=function(){return"rgba("+A(0,255,!0)+","+A(0,255,!0)+","+A(0,255,!0)+",1)"},n.repeatString=tn,n.roundFixed=function(n,t,e){n=x(n);var r,i=Math.pow(10,t),n=(n<0?"-":"")+f(Math.round(Math.abs(n*i))/i);return 0<t&&(r=(i=T(n,"."))[0],(i=i[1]||"").length<t&&(i=E(i,t,"0"),n=(i=e?i.replace(/0+$/,""):i)?r+"."+i:r)),n},n.shake=function(n,t){return t=Object.assign({string:!0,array:!0,kvPair:!0},t),function i(n,t){if(s(n))for(var e in n){var r=n[e];(d(r)||s(r))&&i(r,t),J(r,t)&&delete n[e]}}(n=w(n),t),n},n.shortNumber=function(n,t,e){for(var r=h(e)?bn:e,i=(r.sort(function(n,t){return t[0]-n[0]}),n),o="",a=0;a<r.length;a++){var u=r[a],c=n/u[0];if(1<=Math.abs(c)){i=c,o=u[1];break}}return{value:i,fmtValue:t(i),unit:o}},n.sortWithIndex=function(n,t){for(var e=[],r=0;r<n.length;r++)e[r]=n[t[r]];return e},n.spanTable=function(n,o){var u=w(n),c={};function e(i,o){var a=0;u.forEach(function(n,t){n.$rowSpan=null!=(r=n.$rowSpan)?r:{};var e,r=n[i];c[i]=null!=(e=c[i])?e:0,1<c[i]?(n.$rowSpan[i]=0,c[i]--):(e=function(n,t,e,r){var i=1;for(n++;n<r.length;n++){var o=r[n][t];if(o!==e&&!p(o))break;i++}return i}(t,i,r,u),void 0!==o&&(r=function(n,t,e){for(var r=0;0<=t&&!(0<(r=n[t].$rowSpan[e]));t--);return r}(u,t,o),0<a?r<=a+e?(e=r-a,a=0):a+=e:e<r?a=e:e=r),c[i]=e,n.$rowSpan[i]=c[i])})}return o.forEach(function(n,t){e(n,o[t-1])}),u.forEach(function(r){r.$colField={};var i=0;o.forEach(function(n,t){var e=r[n];1<i?(r.$colField[n]=0,i--):(i=function(n,t,e,r){var i=1;for(n++;n<r.length;n++){var o=b(e[r[n]]);if(o!==t&&!p(o))break;i++}return i}(t,e,r,o),r.$colField[n]=i)})}),u},n.split=T,n.thousands=function(n,i,o){return i=i||3,o=o||",",(v(n)?n:f(n)).replace(/([^.]*)?(\.)?(.*)?/,function(n,t,e,r){return f(t).replace(new RegExp("(.(?=(.{"+i+"})+$))","g"),"$1"+o)+f(e)+f(r)})},n.throttle=function(n,t,e){var r,i,o,a,u,c=I(500,t),{leading:f,trailing:l}=Cn({leading:!0,trailing:!0},e),s=0,h=0,d=!1;function m(){h=s=0}function v(){l&&(1<h||!f)?(g(),u=setTimeout(m,c)):m()}function g(){s=+new Date,n.apply(i,a)}function p(){if(!d){h++;for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];a=t,i=this,r=+new Date,clearTimeout(o),clearTimeout(u),0===s?f?g():s=r:c<=r-s&&g(),o=setTimeout(v,c)}}return p.cancel=function(){clearTimeout(o),clearTimeout(u)},p.dispose=function(){clearTimeout(o),clearTimeout(u),d=!0},p},n.tree=function(n,t){for(var e=(t=g(t)).id||"id",r=t.pid||"pid",i=t.children||"children",o=0;o<n.length;o++){var a,u=n[o];(a=S(n,function(n){return null!=n[e]&&n[e]!=u[e]&&n[e]===u[r]},i))&&(a[i]=_(a[i]),a[i].push(u),n.splice(o--,1))}return n},n.treeFilter=function(n,a){var t=[];return function u(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(a(r)){var i,o={};for(i in r)"children"!==i&&(o[i]=r[i]);d(r.children)&&(o.children=[],u(r.children,o.children)),t.push(o)}}}(n,t),t},n.treeLeafs=function(n){var t=[];return function e(n,t){k(n,function(n){d(n.children)?e(n.children,t):t.push(n)})}(n,t),t},n.trim=b,n.union=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var r=new Set(t);return Array.from(r)},n.urlToGet=function(n,t){n=f(n);var o=s(t)?t:z(t),t=z(n=n.replace(/({{)(.*?)(}})/g,function(n,t,e,r){e=b(e);var i=o[e];return delete o[e],i})),t=K(o=Object.assign(t,o));return n=t?(n=n.replace(/\?.*/,""))+"?"+t:n},n.uuid=function(n){n=x(n);for(var t="",e=0;e<13;e++)t+=A(1,9);return n=(new Date).getTime()*A(1,100),E(R()+Number(t).toString(32)+n.toString(32),20,R()+R()+R())},n.variableHasValue=C});
