/**  
 * bestime.esm.min.js
 * @version 1.0.1
 * @QQ 1174295440
 * @author Bestime
 * @see https://github.com/bestime/tool
 * @update Wed Jul 27 2022 14:31:41 GMT+0800 (中国标准时间)
 */
function serverConfig(e){var r,t,a={};for(t in e)r=e[t],a[t]={to:r,reg:new RegExp("^("+t+")(/|$)")};return function(e){var r,t=!1,n=e;for(r in a){var i=a[r];if(i.reg.test(e)){t=!0,"string"==typeof i.to&&(n=e.replace(i.reg,i.to+"$2"));break}}return t||(console.error('警告：请求地址 "'+e+'" 不在白名单中！'),console.table(a)),n}}function isNull(e){return null===e||e===undefined}function _String(e){return isNull(e)?"":String(e)}var TYPE_ARRAY="Array",_NULL=null,STRING_FALSE="false",STRING_TRUE="true",WINDOW=window||{},_TOSTRING=Object.prototype.toString,TYPE_OBJECT="Object",ENCODE_URI_COMPONENT=encodeURIComponent,_FUNCTION_NAME="function",TYPE_STRING="String",TYPE_NUMBER="Number",DECODE_URI_COMPONENT=decodeURIComponent;function getType(e){return _TOSTRING.call(e).slice(8,-1)}function isArray(e){return getType(e)===TYPE_ARRAY}function isMap(e){return getType(e)===TYPE_OBJECT}function jsonParse(e){try{e=JSON.parse(e)}catch(r){}return e}function _Map(e){return e=isMap(e)||isMap(e=jsonParse(e))?e:{}}function isFunction(e){return typeof e===_FUNCTION_NAME}function param(e){var t=[];function i(e,r){null!=e&&""!==e&&(r=null==(r=isFunction(r)?r():r)?"":r,t[t.length]=ENCODE_URI_COMPONENT(e)+"="+ENCODE_URI_COMPONENT(r))}return function a(e,r){var t,n;if(e)switch(getType(r)){case TYPE_ARRAY:for(t=0;t<r.length;t++)a(e+"["+("object"==typeof r[t]&&r[t]?t:"")+"]",r[t]);break;case TYPE_OBJECT:for(n in r)a(e+"["+n+"]",r[n]);break;default:i(e,r)}else switch(getType(r)){case TYPE_STRING:case TYPE_OBJECT:for(n in r)a(n,r[n]);break;case TYPE_ARRAY:for(t=0;t<r.length;t++)i(r[t].name,r[t].value)}}("",e),t.join("&")}function urlToGet(e,r){e=_String(e).replace(/&*$/g,"").replace(/\?*$/,"");var t="";return(t=isMap(r)||isArray(r)?param(r):_String(r).replace(/^&*/,""))&&(e+=(/\?/.test(e)?"&":"?")+t),e}function trim(e,r){var t=getType(e);if(t===TYPE_NUMBER&&(e=String(e),t=TYPE_STRING),t!==TYPE_STRING)return"";switch(r){case 1:return e.replace(/^[\s\uFEFF\xA0]+/,"");case-1:return e.replace(/[\s\uFEFF\xA0]+$/,"");case 0:case"*":return e.replace(/[\s\uFEFF\xA0]+/g,"");default:return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function isString(e){return getType(e)===TYPE_STRING}function isEmptyMap(e){var r,t=!0;for(r in e)r!==undefined&&(t=!1);return t}function clean(e,r,t){if(t=!1!==t,isMap(e)){var n,i,a={};for(i in e)_filterData(isArray(n=e[i])||isMap(n)?clean(n,r):n,r,t,function(e){a[i]=e})}else if(isArray(e)){a=[];for(var o=0,u=e.length;o<u;o++)_filterData(clean(e[o],r),r,t,function(e){a.push(e)})}else a=e;return a}function _filterData(e,r,t,n){isString(e)?r&&""==trim(e,"*")||n(e):null!=e&&(t&&isMap(e)&&isEmptyMap(e),n(e))}function _Array(e){return e=isArray(e)||isArray(e=jsonParse(e))?e:[]}function variableHasValue(e,r,t){var n;t=null==t?60:t,e()?r():(clearTimeout(n),setTimeout(function(){variableHasValue(e,r,t)},t))}var _tmp={};function dataCacheUtil(e){_tmp[e]=_tmp[e]||{count:0,complete:!1,data:null};var r=_tmp[e];return r.count++,{isExist:function(){return 1<r.count},set:function(e){r.complete=!0,r.data=JSON.stringify(e)},get:function(e){variableHasValue(function(){return r.complete},function(){e(JSON.parse(r.data))},100)},logs:_tmp}}function __spreadArray(e,r,t){if(t||2===arguments.length)for(var n,i=0,a=r.length;i<a;i++)!n&&i in r||((n=n||Array.prototype.slice.call(r,0,i))[i]=r[i]);return e.concat(n||Array.prototype.slice.call(r))}var DEFAULT_CONFIG={id:"id",children:"children"};function deepFindTreePath(e,r,t){t=Object.assign(DEFAULT_CONFIG,t);for(var n=[],i=__spreadArray([],e,!0),a=new Set,o=t.children;i.length;){var u=i[0];if(a.has(u))n.pop(),i.shift();else if(a.add(u),u[o]&&i.unshift.apply(i,u[o]),n.push(u),r(u))return n}return null}function setObjectToString(e){return e=isString(e)?e:JSON.stringify(e)}function setCookie(e,r,t){r=setObjectToString(r);var n=new Date;n.setTime(n.getTime()+t),document.cookie=e+"="+encodeURI(r)+";path=/;expires="+n.toUTCString()}function FN_FORMAT_STRING_VALUE(e){var r=e;if(null==e)r=undefined;else if(STRING_FALSE===e)r=!1;else if(STRING_TRUE===e)r=!0;else if(isString(e))/^\d+$/.test(e)&&(r=String(e));else try{r=JSON.parse(e)}catch(t){}return r}function getCookie(e,r){r=r||document.cookie;var n="";return r.replace(new RegExp("(^|;\\s)"+e+"=(.*?)($|(;\\s))"),function(e,r,t){n=FN_FORMAT_STRING_VALUE(DECODE_URI_COMPONENT(t))}),n}function removeCookie(e){var r=new Date,e=(r.setTime(r.getTime()-1e7),e+"="+encodeURI("")+";expires="+r.toUTCString());document.cookie=e}function _Number(e){return(e=Number(e))===Math.abs(Infinity)||isNaN(e)?0:e}var defaultSplitArr=[_NULL,_NULL];function handleDeepKey(e,r,t){var r=splitSymbol(r),n=r[0];isPreLikeArray(n)?(n=_Number(n),r[1]==_NULL?e.push(t):(/^\[[\D]+\]/.test(r[1])?e[n]=_Map(e[n]):e[n]=_Array(e[n]),handleDeepKey(e[n],r[1],t))):r[1]==_NULL?e[n]=t:(/^\[[\D]+\]/.test(r[1])?e[n]=_Map(e[n]):e[n]=_Array(e[n]),handleDeepKey(e[n],r[1],t))}function splitSymbol(e){if(e==_NULL)return defaultSplitArr;var n,i=e;return e.replace(/^\[(.*?)\](.*)?/,function(e,r,t){return i=r,n=t,""}),[i,n]}function isPreLikeArray(e){return""===e||/^\d+$/.test(e)}function parseQuery(e){var r,a,t,o={};try{r=WINDOW.location.href}catch(n){r=""}return(e=isString(e)?e:r).replace(/([^=&?/#]*?)=([^=&?/#]*)/g,function(e,r,i){i=FN_FORMAT_STRING_VALUE(DECODE_URI_COMPONENT(i)),t=DECODE_URI_COMPONENT(r),a=!1,""!==t&&(t.replace(/(.*?)(\[.*)/,function(e,r,t){var n=splitSymbol(t);a=!0,isPreLikeArray(n[0])?o[r]=_Array(o[r]):o[r]=_Map(o[r]),handleDeepKey(o[r],t,i)}),a||(o[t]=i))}),o}function defaultValue(e,r){return isNull(e)?r:e}function downloadFileByUrl(e,r){var t=document.createElement("a");t.style.display="none",t.download=r,t.setAttribute("href",e),document.body.appendChild(t),t.click(),t.remove()}function downloadFileByArrayBuffer(e,r){downloadFileByUrl(window.URL.createObjectURL(new Blob([e])),r)}export{_Array,_Map,_Number,_String,clean,dataCacheUtil,deepFindTreePath,defaultValue,downloadFileByArrayBuffer,downloadFileByUrl,getCookie,getType,isArray,isFunction,isMap,isNull,param,parseQuery,removeCookie,serverConfig,setCookie,trim,urlToGet,variableHasValue};
