<!DOCTYPE html>
<html style="height: 100%">
  <head>
    <meta charset="utf-8" />
    <style>
      .echartMap div {
        position: absolute;
        overflow: auto;
      }
    </style>
  </head>

  <body style="height: 100%; margin: 0">
    <div
      style="
        position: absolute;
        left: 0;
        top: 0;
        z-index: 20;
        padding: 10px;
        background: #000;
      "
    >
      <button onclick="toAdd01()">添加模拟数据一</button>
      <button onclick="toDel('b')">删除</button>
      <br/><br/>
      <button onclick="toAdd02()">添加模拟数据2</button>
      <button onclick="toDel('a')">删除</button>
    </div>
    <div id="container" style="height: 100%"></div>
    <script type="text/javascript" src="./lib/echarts-all-3.js"></script>
    <script src="../../js/mapbox-gl.js"></script>
    <script src="./js/CommandCenterJsPlugin.js"></script>
    <link href="../../css/mapbox-gl.css" rel="stylesheet" />
    <script type="text/javascript" src="../dist/EchartsLayer.js"></script>
    <script>
      var oCMD
      mapboxgl.accessToken =
        "pk.eyJ1IjoiY3F5aiIsImEiOiJja3d2cXcydTYyMnY1Mm5vMmh6N3d2a2s2In0.A4I9DmsUsrdbZuMRr922MQ"
      var map = new mapboxgl.Map({
        container: "container", // container id
        style: {
          version: 8,

          sources: {},
          layers: [
            {
              id: "background",
              type: "background",
              layout: {
                visibility: "visible",
              },
              paint: {
                "background-color": "#2B7EC8",
              },
            },
          ],
        },
        center: [107.542735, 29.146182], // starting position

        zoom: 4.2,
        pitch: 40,
      })
      // option2.GLMap.map=map;
      map.on("load", function () {
        oCMD = new CommandCenterJsPlugin(EchartsLayer)
        console.log("oCMD", oCMD)
      })

      function toAdd02() {
        oCMD.add({
          id: "a",
          color: 'red',
          path: [
            {
              name: "北京",
              value: 0,
              coordinate: [116.4551, 40.2539],
            },
            {
              name: "上海",
              value: 95,
              coordinate: [121.4648, 31.2891],
            },
          ],
        })
      }

      function toAdd01() {
        oCMD.add({
          id: "b",
          color: 'yellow',
          path: [
            {
              name: "北京",
              value: 0,
              coordinate: [116.4551, 40.2539],
            },
            {
              name: "大同",
              value: 60,
              coordinate: [113.7854, 39.8035],
            },
          ],
        })
      }

      function toDel (id) {
        oCMD.delete(id)
      }
    </script>
  </body>
</html>
