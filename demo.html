<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>测试页面444</title>
  <script src="./dist/bestime@beta.min.js"></script>
  
  <style>
    
  </style>
</head>
<body>



<script>

  const nameObj = {
    text: '张三'
  }



  const slhxStationSkList = [
  {
    name: nameObj,
    tem: 210,
  }
  ]
  const slhxForecastList = [
  {
    name: nameObj,
    feng: 20
  }
  ]

  slhxStationSkList[0].name.text = '李四'
  slhxStationSkList[0].feng = '666'

  console.log('dddddd', slhxStationSkList, slhxForecastList)



  var deepFindItem = ns.deepFindItem
  var data00 = {
    name: 132,
    list: [
      1,2,3,4,
      { name: 123, list: [111] }
    ]
  }

  var nodes = [
  // {"dataId":'0',"parentId":'null',"name":"总父级"},
  {"dataId":'23.2',"parentId":'23',"name":"2-3-2"},
  {"dataId":'13.1',"parentId":'13',"name":"1-3-1"},
  {"dataId":'1',"parentId":'0',"name":"1","open":true},
  {"dataId":'11',"parentId":'1',"name":"1-1"},
  {"dataId":'12',"parentId":'1',"name":"1-2"},
  {"dataId":'13',"parentId":'1',"name":"1-3"},
  




  {"dataId":'2',"parentId":'0',"name":"2"},
  {"dataId":'21',"parentId":'2',"name":"2-1","open":true},
  {"dataId":'22',"parentId":'2',"name":"2-2"},
  {"dataId":'23',"parentId":'2',"name":"2-3"},
  {"dataId":'23.1',"parentId":'23',"name":"2-3-1"},
  {"dataId":'22.1',"parentId":'22',"name":"2-2-1"},
  {"dataId":'22.1.1',"parentId":'22.1',"name":"2-2-1-1"},

  {"dataId":'3',"parentId":'0',"name":"3"},
  {"dataId":'23.3',"parentId":'23',"name":"2-3-3"},

  
];

nodes.reverse()


const treeList = ns.flatArrayToTree(ns.clone(nodes), {
  id: 'dataId',
  pid: 'parentId',
  children: 'childList'
})

const ddd2 = jsonTree(ns.clone(nodes),{
  id: 'dataId',
  pid: 'parentId',
  children: 'childList'
})

console.log(treeList, ddd2)


function jsonTree(data, config) {
  if (!data || data.length === 0) return []
  const id = config.id || 'id'
  const pid = config.pid || 'pid'
  const name = config.label || 'name'
  const children = config.children || 'children'
  const idMap = []
  const jsonTree = []

  data.forEach((v) => {
    idMap[v[id]] = v
    v.label = v[name]
  })

  data.forEach((v) => {
    const parent = idMap[v[pid]]
    delete v.parent // 删除{v}的parent和id
    if (parent && v[id] !== v[pid]) {
      // eslint-disable-next-line no-unused-expressions
      !parent[children] && (parent[children] = [])
      parent[children].push(v)
    } else {
      jsonTree.push(v)
    }
  })
  return jsonTree
}



</script>
</body>
</html>

